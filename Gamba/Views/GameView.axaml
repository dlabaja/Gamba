<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:viewModels="clr-namespace:Gamba.ViewModels"
             xmlns:slotRow="clr-namespace:Gamba.Views.Controls.SlotRow"
             x:Class="Gamba.Views.GameView"
             x:DataType="viewModels:GameViewModel">
    <UserControl.Styles>
        <Style Selector="StackPanel.CanvasPanel">
            <Setter Property="Transitions">
                <Transitions>
                    <ThicknessTransition 
                        Property="Margin" 
                        Duration="0:0:0.3" 
                        Easing="CubicEaseOut"
                    />
                </Transitions>
            </Setter>
        </Style>
    </UserControl.Styles> 
    <StackPanel>
        <StackPanel>
            <TextBlock Text="{Binding Level, StringFormat=Level: {0}}" />
            <TextBlock Text="{Binding Score, StringFormat=Score: {0}}" />
        </StackPanel>
        <StackPanel Orientation="Horizontal">
            <StackPanel Width="350">
                <Image
                    MaxWidth="350"
                    Source="avares://Gamba/Assets/img/machine-top.png"
                    />
                <Grid Width="350" ColumnDefinitions="25,300,25" HorizontalAlignment="Center">
                    <Image 
                        Height="300"
                        Width="25"
                        Source="avares://Gamba/Assets/img/machine-side.png"/>
                    <Canvas
                        Grid.Column="1"
                        Width="300" 
                        Height="300" 
                        ClipToBounds="True" 
                        VerticalAlignment="Bottom" 
                        HorizontalAlignment="Stretch">
                        <StackPanel Name="CanvasPanel" Canvas.Bottom="0" Classes="CanvasPanel" Width="300">
                            <ItemsControl ItemsSource="{Binding Slots}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <slotRow:SlotRow Symbols="{Binding}"/>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </StackPanel>
                    </Canvas>
                    <Image
                        Grid.Column="2"
                        Height="300"
                        Width="25"
                        HorizontalAlignment="Stretch"
                        Source="avares://Gamba/Assets/img/machine-side.png"/>
                </Grid>
                <Image Source="avares://Gamba/Assets/img/machine-bottom.png"/>
            </StackPanel>
            <Button
                Background="Transparent"
                Click="Handle_OnClick"
                Command="{Binding RollCommand}"
                VerticalAlignment="Bottom"
                HorizontalAlignment="Right">
                <Image
                    Name="Handle"
                    MaxHeight="500"
                    Width="100"
                    Source="avares://Gamba/Assets/img/lever-up.png"/>
            </Button>
        </StackPanel>
        <Button
            Command="{Binding EndGameCommand}"
            HorizontalAlignment="Right">
            Give up
        </Button>
    </StackPanel>
</UserControl>